<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-button (click)="done('back')">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Tool Information</ion-title>
    <ion-buttons slot="end">
      <!-- edit -->
      <ng-container *ngIf="isEdit">
        <ion-button (click)="save()" *ngIf="isChange" title="Save tool Infor">
          <ion-icon name="save"></ion-icon>
        </ion-button>

        <ion-button (click)="addImage()" title="add Image">
          <ion-icon name="camera"></ion-icon>
        </ion-button>

        <ion-button (click)="duplicate()" title="Duplicate tool infor">
          <ion-icon name="duplicate"></ion-icon>
        </ion-button>

        <ion-button (click)="delete()" title="delete tool Infor">
          <ion-icon name="trash"></ion-icon>
        </ion-button>
      </ng-container>
      <!-- new tool -->
      <ion-button (click)="detail()" title="new tool">
        <ion-icon name="add-circle"></ion-icon>
      </ion-button>

      <ion-button (click)="isEdit=!isEdit" [title]="isEdit?'View':'Edit'">
        <ion-icon *ngIf="isEdit" title="Edit" name="book"></ion-icon>
        <ion-icon *ngIf="!isEdit" title="View" name="create"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content color="light" >
  <ion-card (click)="showImage()">
    <ion-grid>
      <ion-row *ngIf="!viewImages.length">
        <ion-col>
          <img src="./../../../assets/image/no-image.png" class="image-43">
        </ion-col>
      </ion-row>
      <ion-row *ngIf="viewImages.length==1">
        <ion-col>
          <img [src]="viewImages[0]" class="image-43">
        </ion-col>
      </ion-row>
      <ion-row *ngIf="viewImages.length==2">
        <ion-col>
          <img [src]="viewImages[0]" class="image-square">
        </ion-col>
        <ion-col>
          <img [src]="viewImages[1]" class="image-square">
        </ion-col>
      </ion-row>

      <ion-row *ngIf="viewImages.length>=3">
        <ion-col size="8">
          <img [src]="viewImages[0]" class="image-square">
        </ion-col>
        <ion-col size="4" offset="0">
          <ion-row >
            <ion-col>
              <img [src]="viewImages[1]" class="image-square">
            </ion-col>
          </ion-row>
          <ion-row >
            <ion-col>
              <img [src]="viewImages[2]" class="image-square last">
              <div class="image-more" *ngIf="viewImages.length>3">{{viewImages.length-3}}</div>
            </ion-col>
          </ion-row>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-card>
  <!-- information -->
  <ion-card class="info">
    <ion-list >
      <!-- edit page -->
      <ng-container *ngIf="isEdit">
        <ion-item>
          <ion-label color="primary">Part No</ion-label>
          <ion-input (ionChange)="isChange=true" [(ngModel)]="model.id"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label color="primary">Part Name</ion-label>
          <ion-input  (ionChange)="isChange=true" [(ngModel)]="model.name"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label color="primary">Category</ion-label>
          <ion-input (ionChange)="isChange=true" [(ngModel)]="model.group"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label color="primary">Maintenance Period [day]</ion-label>
          <ion-input (ionChange)="isChange=true" [(ngModel)]="model.maintenance"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label color="primary">Comp Qty[pcs]</ion-label>
          <ion-input (ionChange)="isChange=true" [(ngModel)]="model.compQty"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label color="primary">Quantity [pcs]</ion-label>
          <ion-text>{{tools.length}}</ion-text>
        </ion-item>
      </ng-container>
      <!-- view page -->
      <ng-container *ngIf="!isEdit">
        <ion-item>
          <ion-label>Part No</ion-label>
          <ion-text>{{model.id}}</ion-text>
        </ion-item>
        <ion-item>
          <ion-label>Part Name</ion-label>
          <ion-text >{{model.name}}</ion-text>
        </ion-item>
        <ion-item>
          <ion-label>Category</ion-label>
          <ion-text >{{model.group}}</ion-text>
        </ion-item>
        <ion-item>
          <ion-label>Maintenance Period [day]</ion-label>
          <ion-text >{{model.maintenance}}</ion-text>
        </ion-item>
        <ion-item>
          <ion-label>Comp Qty[pcs]</ion-label>
          <ion-text >{{model.compQty}}</ion-text>
        </ion-item>
      </ng-container>
  
      <ion-accordion-group>
        <ion-accordion>
          <ion-item slot="header">
            <ion-label>Quantity [pcs]</ion-label>
            <ion-text>{{tools.length}}</ion-text>
          </ion-item>

          <div slot="content">
            <ion-chip (click)="detail(tool)" color="primary" *ngFor="let tool of tools">{{tool.id}}</ion-chip>
          </div>
        </ion-accordion>
      </ion-accordion-group>
      
    </ion-list>
  </ion-card>
</ion-content>